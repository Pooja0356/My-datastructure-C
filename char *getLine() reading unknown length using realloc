#include <stdio.h>
#include <stdlib.h>

char *getLine(void) {
    int cap = 16, len = 0;
    char *buf = (char*)malloc(cap);
    if (!buf) return NULL;
    int c;
    while ((c = getchar()) != EOF && c != '\n') {
        if (len + 1 >= cap) {
            cap *= 2;
            char *tmp = (char*)realloc(buf, cap);
            if (!tmp) { free(buf); return NULL; }
            buf = tmp;
        }
        buf[len++] = (char)c;
    }
    buf[len] = '\0';
    return buf;
}

int main() {
    printf("Enter line:\n");
    char *s = getLine();
    if (!s) return 0;
    printf("You entered: %s\n", s);
    free(s);
    return 0;
}
